version: '3.8'
services:
  web:
    build:
      context: ./
    volumes:
      - .:/src
    command: npm run start
    ports:
      - 3000:3000
    labels:
      - traefik.enable=true
      - traefik.http.routers.blogFrontend.rule=Host(`marklund.io`)
      - "traefik.http.routers.blogFrontend.entrypoints=websecure"
      - "traefik.http.routers.blogFrontend.tls.certresolver=marklundresolver"
      - traefik.docker.network=proxy
    networks:
      blog:
       ipv4_address: 10.6.0.2

networks:
  blog:
   name: blog
   ipam:
    driver: default
    config:
       - subnet: 10.6.0.0/16
         gateway: 10.6.0.1